pg_replica:
  query: |
    SELECT
    GREATEST (0, EXTRACT(EPOCH FROM (now() - pg_last_xact_replay_timestamp()))) as rlag_seconds,
    pg_wal_lsn_diff(pg_last_wal_receive_lsn(), pg_last_wal_replay_lsn()) as rlag_bytes
    WHERE  pg_is_in_recovery();
  metrics:
    - rlag_seconds:
        usage: "GAUGE"
        description: "Replay lag in seconds"
    - rlag_bytes:
        usage: "GAUGE"
        description: "Replay lag in bytes"
